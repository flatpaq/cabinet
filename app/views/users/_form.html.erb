<% if user.errors.present? %>
  <ul id="error-explanation">
    <% user.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
<% end %>



<%= form_with(model: user, local: true, class: 'form') do |f| %>


<div class="row">


  <div class="col-lg-9">

    <%= f.label :name_id %>
    <%= f.text_field :name_id, class: 'form' %>

    <%= f.label :name %>
    <%= f.text_field :name, class: 'form' %>

    <%= f.label :email %>
    <%= f.text_field :email, class: 'form' %>

    <%= f.label :introduction %>
    <%= f.text_area :introduction, class: 'form' %>

    <% if current_user.admin? %>

      <%= f.label :admin, class: 'toggle' do %>
        <%= f.check_box :admin %>
        <span>管理者権限をつける</span>
      <% end %>
    
      <%= f.label :state, class: 'toggle' do %>
        <%= f.check_box :state %>
        <span>ユーザーの有効</span>
      <% end %>

    <% end %>

    <%= f.label :password, 'パスワード' %>
    <%= f.password_field :password, class: 'form' %>

    <%= f.label :password_confirmation, 'パスワードの確認' %>
    <%= f.password_field :password_confirmation, class: 'form' %>

    <%= f.submit '登録する', class: 'btn' %>
    
  </div>


  <div class="col-lg-3 order-first order-lg-last">
    <%# 画像 %>
    <label>プロフィール画像</label>

    <div class="window">
      <%= f.label :user_image do %>
        <%= f.file_field :user_image, class: 'form btn file-upload' %>
        <div class="btn btn-radius border user-profile-file-upload" type="button">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
          <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
          <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
          </svg>ファイルを選択
        </div>
      <% end %>

      <div id="new-image" class="user-profile-image">
        <% if user.user_image.attached? %>
          <%= image_tag user.user_image, class: 'new-img' %>
        <% end %>
      </div>

    </div>

  </div>


</div>

<% end %>